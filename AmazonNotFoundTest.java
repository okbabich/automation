package skillup;


import org.junit.AfterClass;
import org.junit.BeforeClass;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.junit.runners.Parameterized;
import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import utils.Concurrent;
import utils.ConcurrentJunitRunner;

import java.util.Arrays;
import java.util.Collection;
import java.util.List;

import static org.junit.Assert.assertTrue;
import static skillup.Utils.*;
import static skillup.Xpathes.*;


@Concurrent(threads = 1)
@RunWith(ConcurrentJunitRunner.class)
public class AmazonNotFoundTest {

    private String isbn;
    public static WebDriver driver;

    public AmazonNotFoundTest(String isbn) {
        this.isbn = isbn;
    }

    @Parameterized.Parameters
    public static Collection primeNumbers() {
        return Arrays.asList(new Object[][]{
                {"9780176527310"},
                {"9780357005828"},
                {"9780357006511"},
                {"9780357006696"},
                {"9780357007891"},
                {"9780357011461"},
                {"9780357011508"},
                {"9780357011553"},
                {"9780357011607"},
                {"9780357013601"},
                {"9780357014691"},
                {"9780357016862"},
                {"9780357018361"},
                {"9780357018408"},
                {"9780357018613"},
                {"9780357019603"},
                {"9780357033869"},
                {"9780357039199"},
                {"9780357039236"},
                {"9780357039243"},
                {"9780357048351"},
                {"9780357092354"},
                {"9780357092460"},
                {"9780357096017"},
                {"9780357096758"},
                {"9780357097847"},
                {"9780357098004"},
                {"9780357098240"},
                {"9780357098844"},
                {"9780357099384"},
                {"9780357099711"},
                {"9780357099896"},
                {"9780357101889"},
                {"9780357195482"},
                {"9780357252376"},
                {"9780357252895"},
                {"9780357253496"},
                {"9780357253526"},
                {"9780357261347"},
                {"9780357261606"},
                {"9780357262146"},
                {"9780357262306"},
                {"9780357262801"},
                {"9780357263020"},
                {"9780357264010"},
                {"9780357264522"},
                {"9780357264539"},
                {"9780357264546"},
                {"9780357264591"},
                {"9780357264614"},
                {"9780357265604"},
                {"9780357277331"},
                {"9780357293133"},
                {"9780357307571"},
                {"9780357700006"},
                {"9780357700013"},
                {"9780357700020"},
                {"9780357700044"},
                {"9780357700051"},
                {"9780495024248"},
                {"9780495600329"},
                {"9780495963615"},
                {"9780495965756"},
                {"9780534987862"},
                {"9780618379125"},
                {"9780618610082"},
                {"9781111123680"},
                {"9781111226046"},
                {"9781111294229"},
                {"9781111490256"},
                {"9781111572198"},
                {"9781111647049"},
                {"9781111654795"},
                {"9781111658618"},
                {"9781111822606"},
                {"9781111823672"},
                {"9781111831028"},
                {"9781111836948"},
                {"9781111868437"},
                {"9781133023951"},
                {"9781133024415"},
                {"9781133226413"},
                {"9781133264187"},
                {"9781133269243"},
                {"9781133432968"},
                {"9781133534044"},
                {"9781133540489"},
                {"9781133622772"},
                {"9781133847007"},
                {"9781133851479"},
                {"9781133852391"},
                {"9781133903796"},
                {"9781133904052"},
                {"9781285031330"},
                {"9781285153230"},
                {"9781285157634"},
                {"9781285158570"},
                {"9781285159119"},
                {"9781285194806"},
                {"9781285257495"},
                {"9781285269474"},
                {"9781285336848"},
                {"9781285337012"},
                {"9781285343488"},
                {"9781285453149"},
                {"9781285478005"},
                {"9781285483092"},
                {"9781285483856"},
                {"9781285484587"},
                {"9781285485386"},
                {"9781285486222"},
                {"9781285487298"},
                {"9781285490823"},
                {"9781285571355"},
                {"9781285574950"},
                {"9781285576367"},
                {"9781285586236"},
                {"9781285586816"},
                {"9781285715292"},
                {"9781285716671"},
                {"9781285716756"},
                {"9781285718378"},
                {"9781285718507"},
                {"9781285719610"},
                {"9781285722610"},
                {"9781285722979"},
                {"9781285723068"},
                {"9781285723662"},
                {"9781285723679"},
                {"9781285730066"},
                {"9781285931883"},
                {"9781285932194"},
                {"9781285933498"},
                {"9781285943237"},
                {"9781285990798"},
                {"9781285996479"},
                {"9781305087347"},
                {"9781305095113"},
                {"9781305110595"},
                {"9781305130227"},
                {"9781305130340"},
                {"9781305133204"},
                {"9781305133723"},
                {"9781305133921"},
                {"9781305134164"},
                {"9781305135185"},
                {"9781305137677"},
                {"9781305138698"},
                {"9781305140158"},
                {"9781305366824"},
                {"9781305382299"},
                {"9781305383135"},
                {"9781305384989"},
                {"9781305391857"},
                {"9781305412385"},
                {"9781305412682"},
                {"9781305413948"},
                {"9781305414709"},
                {"9781305416611"},
                {"9781305416628"},
                {"9781305417601"},
                {"9781305418950"},
                {"9781305419964"},
                {"9781305420403"},
                {"9781305420823"},
                {"9781305421042"},
                {"9781305427877"},
                {"9781305429420"},
                {"9781305430013"},
                {"9781305434929"},
                {"9781305516175"},
                {"9781305519169"},
                {"9781305522756"},
                {"9781305523210"},
                {"9781305578050"},
                {"9781305598560"},
                {"9781305611535"},
                {"9781305612990"},
                {"9781305621121"},
                {"9781305622258"},
                {"9781305625204"},
                {"9781305698772"},
                {"9781305698833"},
                {"9781305698918"},
                {"9781305701076"},
                {"9781305701540"},
                {"9781305703513"},
                {"9781305706422"},
                {"9781305707283"},
                {"9781305709119"},
                {"9781305716506"},
                {"9781305773516"},
                {"9781305774100"},
                {"9781305774407"},
                {"9781305777439"},
                {"9781305780842"},
                {"9781305780972"},
                {"9781305781627"},
                {"9781305782525"},
                {"9781305783645"},
                {"9781305785281"},
                {"9781305792012"},
                {"9781305812802"},
                {"9781305813007"},
                {"9781305813533"},
                {"9781305814011"},
                {"9781305816138"},
                {"9781305872745"},
                {"9781305874350"},
                {"9781305874749"},
                {"9781305923201"},
                {"9781305923218"},
                {"9781305932067"},
                {"9781305932173"},
                {"9781305933095"},
                {"9781305933798"},
                {"9781305937239"},
                {"9781305937550"},
                {"9781337062367"},
                {"9781337066280"},
                {"9781337071611"},
                {"9781337071925"},
                {"9781337113786"},
                {"9781337145626"},
                {"9781337146456"},
                {"9781337147835"},
                {"9781337201414"},
                {"9781337204811"},
                {"9781337219150"},
                {"9781337296243"},
                {"9781337364836"},
                {"9781337367769"},
                {"9781337369084"},
                {"9781337373364"},
                {"9781337378598"},
                {"9781337383363"},
                {"9781337383370"},
                {"9781337389112"},
                {"9781337406239"},
                {"9781337407359"},
                {"9781337501569"},
                {"9781337503006"},
                {"9781337546843"},
                {"9781337559454"},
                {"9781337576161"},
                {"9781337585705"},
                {"9781337585736"},
                {"9781337585804"},
                {"9781337594806"},
                {"9781337601658"},
                {"9781337603737"},
                {"9781337605571"},
                {"9781337606271"},
                {"9781337618625"},
                {"9781337694193"},
                {"9781337702980"},
                {"9781337703086"},
                {"9781337741538"},
                {"9781337741682"},
                {"9781337743471"},
                {"9781337747561"},
                {"9781337760423"},
                {"9781337760676"},
                {"9781337801102"},
                {"9781337803465"},
                {"9781337803526"},
                {"9781337803595"},
                {"9781337808026"},
                {"9781337809528"},
                {"9781337812887"},
                {"9781337812900"},
                {"9781337814966"},
                {"9781337815147"},
                {"9781337815680"},
                {"9781337815697"},
                {"9781337817073"},
                {"9781337817226"},
                {"9781337817936"},
                {"9781337818292"},
                {"9781337881074"},
                {"9781337881609"},
                {"9781337881760"},
                {"9781337884440"},
                {"9781337885379"},
                {"9781337886178"},
                {"9781337887694"},
                {"9781337887748"},
                {"9781337887892"},
                {"9781337888028"},
                {"9781337890328"},
                {"9781337891141"},
                {"9781337894128"},
                {"9781401899592"},
                {"9781401899615"},
                {"9781418048471"},
                {"9781428312173"},
                {"9781435430976"},
                {"9781439042250"},
                {"9781581759143"},
                {"9781581759372"},
                {"9781581759518"}
        });
    }

    @BeforeClass
    public static void initializationDriver() {
        driver = initTheSameDriver();
        driver.get("https://www.amazon.com/s?k=---&ref=nb_sb_noss");
    }

    @Test
    public void findISBN() {

        driver.findElement(By.xpath(XPATH_SEARCH_BOX_AMAZON)).click();
        driver.findElement(By.xpath(XPATH_SEARCH_BOX_AMAZON)).clear();
        driver.findElement(By.xpath(XPATH_SEARCH_FIELD_AMAZON)).sendKeys(isbn);
        driver.findElement(By.xpath(XPATH_SUBMIT_BUTTON_AMAZON)).click();
        List<WebElement> noResultBlock = driver.findElements(By.xpath(XPATH_NO_RESULT_MESSAGE_AMAZON)); //для того, чтобы тест не фейлился.
                                                                                                                                  //создается коллекция,
                                                                                                                                  //в которую складываются найденные блочки
        if (noResultBlock.size() > 0) {                                               //если в коллекции есть какой-то элемент, то
            assertTrue(noResultBlock.get(0).getText().contains("No results"));       //возьми этот элемент, текст в нем должен быть "No results"

        } else {                                                                   //если такого элемента нет,
            System.out.println("ISBN is present on site " + isbn);                         //выведи на экран, какой ISBN есть на сайте
            assertTrue(false);
        }
    }

    @AfterClass
    public static void stopDriver() {
        closeDriver();
    }
}



